<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/games"></ion-back-button>
    </ion-buttons>
    <ion-title>Pac-Man</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="restart()">
        ðŸ”„ Recommencer
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="pacman-container">
  <!-- En-tÃªte du jeu -->
  <div class="game-header">
    <div class="stats-row">
      <div class="stat-card">
        <h3>Score</h3>
        <p>{{ gameState.score }}</p>
      </div>
      <div class="stat-card">
        <h3>Pastilles</h3>
        <p>{{ gameState.dotsRemaining }}</p>
      </div>
      <div class="stat-card">
        <h3>Status</h3>
        <p *ngIf="!gameState.gameOver">ðŸŽ® En jeu</p>
        <p *ngIf="gameState.gameOver && gameState.won" class="won">ðŸŽ‰ Victoire !</p>
        <p *ngIf="gameState.gameOver && !gameState.won" class="lost">ðŸ’€ Game Over</p>
      </div>
    </div>
  </div>

  <!-- Instructions -->
  <div class="instructions" *ngIf="!gameState.gameOver">
    <ion-card>
      <ion-card-content>
        <p>ðŸŽ® <strong>ContrÃ´les :</strong> Utilisez les flÃ¨ches du clavier pour dÃ©placer Pac-Man</p>
        <p>ðŸŽ¯ <strong>Objectif :</strong> Mangez toutes les pastilles avant que le fantÃ´me ne vous attrape !</p>
        <p>ðŸ”„ <strong>Recommencer :</strong> Appuyez sur Espace ou cliquez sur le bouton</p>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Labyrinthe -->
  <div class="maze-container">
    <div class="maze">
      <div *ngFor="let row of gameState.grid; let rowIndex = index" class="row">
        <div 
          *ngFor="let cell of row; let colIndex = index" 
          [ngClass]="getCellClass(cell)"
          class="cell">
          <span *ngIf="cell === '.'" class="dot">â€¢</span>
          <span *ngIf="cell === 'P'" class="pacman-emoji">ðŸ˜€</span>
          <span *ngIf="cell === 'G'" class="ghost-emoji">ðŸ‘»</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Ã‰cran de fin de partie -->
  <div class="game-over-screen" *ngIf="gameState.gameOver">
    <div class="game-over-content">
      <h1 *ngIf="gameState.won">ðŸŽ‰ Victoire !</h1>
      <h1 *ngIf="!gameState.won">ðŸ’€ Game Over</h1>
      
      <div class="final-stats">
        <div class="stat-item">
          <h3>Score Final</h3>
          <p class="final-score">{{ gameState.score }}</p>
        </div>
        <div class="stat-item">
          <h3>Pastilles Mangees</h3>
          <p>{{ gameState.dotsRemaining === 0 ? 'Toutes !' : gameState.dotsRemaining + ' restantes' }}</p>
        </div>
      </div>
      
      <div class="action-buttons">
        <ion-button size="large" (click)="restart()">
          ðŸ”„ Nouvelle Partie
        </ion-button>
      </div>
    </div>
  </div>
</ion-content> 