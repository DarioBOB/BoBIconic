<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Jeux</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Statistiques -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Mes Statistiques</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <div class="stat-item">
              <h3>{{ statistics.totalSessions }}</h3>
              <p>Parties jouées</p>
            </div>
          </ion-col>
          <ion-col size="6">
            <div class="stat-item">
              <h3>{{ statistics.averageScore }}</h3>
              <p>Score moyen</p>
            </div>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6">
            <div class="stat-item">
              <h3>{{ statistics.bestScore }}</h3>
              <p>Meilleur score</p>
            </div>
          </ion-col>
          <ion-col size="6">
            <div class="stat-item">
              <h3>{{ getFavoriteGameName() }}</h3>
              <p>Jeu préféré</p>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <!-- Liste des jeux -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Jeux Disponibles</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let game of games" (click)="selectGame(game)">
          <div slot="start" class="game-icon" [style.color]="getGameColor(game.category)">{{ game.icon }}</div>
          <ion-label>
            <h2>{{ game.name }}</h2>
            <p>{{ game.description }}</p>
            <p>Difficulté: {{ game.difficulty }}</p>
          </ion-label>
          <ion-button slot="end" fill="outline" (click)="startGame(game)">
            JOUER
          </ion-button>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Sessions récentes -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Sessions Récentes</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let session of recentSessions">
          <ion-label>
            <h2>{{ getGameName(session.gameId) }}</h2>
            <p>Score: {{ session.score }} | {{ session.date | date:'short' }}</p>
          </ion-label>
          <ion-button slot="end" fill="outline" (click)="viewSessionDetails(session)">
            Détails
          </ion-button>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Achèvements -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Achèvements</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <p>{{ getUnlockedAchievementsCount() }}/{{ achievements.length }} débloqués</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="6" *ngFor="let achievement of achievements">
            <ion-card [class.unlocked]="achievement.isUnlocked">
              <ion-card-content>
                <h3>{{ achievement.name }}</h3>
                <p>{{ achievement.description }}</p>
                <ion-icon [name]="achievement.isUnlocked ? 'checkmark-circle' : 'lock-closed'"></ion-icon>
              </ion-card-content>
            </ion-card>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
</ion-content>

<!-- Modal de création de session -->
<ion-modal [isOpen]="showCreateSessionModal" (didDismiss)="closeCreateSessionModal()">
  <ng-template>
    <ion-header>
      <ion-toolbar>
        <ion-title>Nouvelle Session</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeCreateSessionModal()">Fermer</ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-card>
        <ion-card-content>
          <h2>{{ selectedGame?.name }}</h2>
          <p>{{ selectedGame?.description }}</p>
          
          <ion-item>
            <ion-label>Nombre de rounds</ion-label>
            <ion-select [(ngModel)]="sessionConfig.rounds">
              <ion-select-option value="3">3 rounds</ion-select-option>
              <ion-select-option value="5">5 rounds</ion-select-option>
              <ion-select-option value="10">10 rounds</ion-select-option>
            </ion-select>
          </ion-item>
          
          <ion-item>
            <ion-label>Difficulté</ion-label>
            <ion-select [(ngModel)]="sessionConfig.difficulty">
              <ion-select-option value="easy">Facile</ion-select-option>
              <ion-select-option value="medium">Moyen</ion-select-option>
              <ion-select-option value="hard">Difficile</ion-select-option>
            </ion-select>
          </ion-item>
          
          <ion-button expand="block" (click)="createSession()">
            Commencer la partie
          </ion-button>
        </ion-card-content>
      </ion-card>
    </ion-content>
  </ng-template>
</ion-modal> 