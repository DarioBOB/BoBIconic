import{a as We}from"./chunk-ODMQSSDB.js";import{a as Ve}from"./chunk-464GFWSI.js";import"./chunk-YWEJ7XCU.js";import{a as ze}from"./chunk-77SYAVCL.js";import{a as X,d as ce,e as Se,g as pe,i as Ee,j as de,l as be,m as ue}from"./chunk-PJ4DBHJV.js";import{a as ge}from"./chunk-PI2OKPQD.js";import{a as Pe}from"./chunk-AYIK34GE.js";import{B as $e,D as He,F as re,b as we,e as Re,f as Fe,h as Z,i as ee,j as te,l as Ne,m as Me,n as ie,p as ne,q as ae,r as Le,s as ke,t as Be,u as je,x as Ge,z as Ue}from"./chunk-V5B2KLGN.js";import"./chunk-F6L3CC75.js";import{F as Q}from"./chunk-HLI2QS3U.js";import{$ as U,$a as Oe,Ca as ve,Da as De,Ea as Ie,Fa as xe,Ga as ye,H as l,I as z,Ia as Y,Ja as K,K as q,Ma as J,P as x,S as _,Sa as Te,U as s,V as c,W as h,X as b,Y as C,Ya as Ce,Z as V,_ as G,aa as I,eb as Ae,ha as w,ia as p,ja as f,ka as O,la as M,m as j,ma as me,na as fe,oa as he,p as A,qa as W,ra as g,sa as D,ta as E,ua as N,w as L,x as k}from"./chunk-GCV73WN4.js";import"./chunk-PTOT3QKV.js";import"./chunk-B5GAGNNW.js";import"./chunk-7CZIZFFD.js";import"./chunk-IFM5WRZ2.js";import"./chunk-HC6MZPB3.js";import"./chunk-IP3IRUG3.js";import"./chunk-EX3LFGLF.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-OFKYDT3Y.js";import"./chunk-SJBLRW5X.js";import"./chunk-JFFBAPXU.js";import"./chunk-MCRJI3T3.js";import"./chunk-BBW2JLGN.js";import"./chunk-B7L6ZJ5P.js";import"./chunk-KLLAU2Z6.js";import"./chunk-MGGEGWLF.js";import"./chunk-OAACOBQM.js";import"./chunk-JWIEPCRG.js";import"./chunk-HUAH4PE6.js";import"./chunk-SV7S5NYR.js";import"./chunk-C5RQ2IC2.js";import"./chunk-K5LNJG62.js";import"./chunk-THTBSZJO.js";import"./chunk-GNOVVPTF.js";import"./chunk-BAKMWPBW.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{a as P,b as S,g as T}from"./chunk-OLRFWS6T.js";var qe=(()=>{let o=class o{getAircraftDisplay(){var i,n,d,r,m;let e=((d=(n=(i=this.flightData)==null?void 0:i.details)==null?void 0:n.flight)==null?void 0:d.aircraft)||((m=(r=this.flightData)==null?void 0:r.details)==null?void 0:m.aircraft)||this.aircraftIcao;if(!e)return"-";if(typeof e=="string")return e;if(typeof e=="object"){let v=[e.type,e.model,e.name,e.registration,e.age].filter(y=>y&&y!=="null"&&y!=="-");return v.length===0?"Non renseign\xE9":v.join(" / ")}return"-"}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=q({type:o,selectors:[["app-flight-details"]],inputs:{flightData:"flightData",flightNumber:"flightNumber",departureIcao:"departureIcao",arrivalIcao:"arrivalIcao",airlineIata:"airlineIata",aircraftIcao:"aircraftIcao"},decls:26,vars:14,consts:[[1,"flight-details-card"],["lines","none"],["name","airplane-outline","slot","start"],[1,"flight-title"],[1,"flight-airports"],["name","arrow-forward-outline"],[1,"flight-airline"]],template:function(i,n){i&1&&(s(0,"ion-card",0)(1,"ion-card-header")(2,"ion-item",1),h(3,"ion-icon",2),s(4,"ion-label")(5,"div",3),p(6),c(),s(7,"div",4)(8,"span"),p(9),c(),h(10,"ion-icon",5),s(11,"span"),p(12),c()(),s(13,"div",6),p(14),c()()()(),s(15,"ion-card-content")(16,"div"),p(17),g(18,"date"),c(),s(19,"div"),p(20),g(21,"date"),c(),s(22,"div"),p(23),c(),s(24,"div"),p(25),c()()()),i&2&&(l(6),O("Vol ",n.flightNumber||(n.flightData==null||n.flightData.details==null||n.flightData.details.flight==null?null:n.flightData.details.flight.flight_number)||(n.flightData==null||n.flightData.details==null?null:n.flightData.details.flight_number)||"-",""),l(3),f(n.departureIcao||(n.flightData==null||n.flightData.details==null||n.flightData.details.flight==null||n.flightData.details.flight.departure==null?null:n.flightData.details.flight.departure.airport)||(n.flightData==null||n.flightData.details==null||n.flightData.details.departure==null?null:n.flightData.details.departure.airport)||"-"),l(3),f(n.arrivalIcao||(n.flightData==null||n.flightData.details==null||n.flightData.details.flight==null||n.flightData.details.flight.arrival==null?null:n.flightData.details.flight.arrival.airport)||(n.flightData==null||n.flightData.details==null||n.flightData.details.arrival==null?null:n.flightData.details.arrival.airport)||"-"),l(2),f(n.airlineIata||(n.flightData==null||n.flightData.details==null||n.flightData.details.flight==null?null:n.flightData.details.flight.airline)||(n.flightData==null||n.flightData.details==null?null:n.flightData.details.airline)||"-"),l(3),O("D\xE9part : ",E(18,8,n.flightData==null?null:n.flightData.startDate,"short"),""),l(3),O("Arriv\xE9e : ",E(21,11,n.flightData==null?null:n.flightData.endDate,"short"),""),l(3),O("Avion : ",n.getAircraftDisplay(),""),l(2),O("Statut : ",(n.flightData==null?null:n.flightData.status)||"-",""))},dependencies:[re,Z,ee,te,ie,ne,ae,K,Y],styles:[".flight-details-card[_ngcontent-%COMP%]{margin-bottom:12px}.flight-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em}.flight-airports[_ngcontent-%COMP%]{color:#1976d2;font-size:1em;margin:4px 0}.flight-airline[_ngcontent-%COMP%]{color:#757575;font-size:.95em}"]});let a=o;return a})();var Ye=(()=>{let o=class o{constructor(e){this.http=e,this.OPENFLIGHTS_AIRPORTS_URL="https://raw.githubusercontent.com/jpatokal/openflights/master/data/airports.dat",this.OPENFLIGHTS_AIRLINES_URL="https://raw.githubusercontent.com/jpatokal/openflights/master/data/airlines.dat",this.OUR_AIRPORTS_URL="https://davidmegginson.github.io/ourairports-data/airports.csv",this.OPENFLIGHTS_AIRCRAFT_URL="https://raw.githubusercontent.com/jpatokal/openflights/master/data/planes.dat"}getAirportDetails(e){return T(this,null,function*(){try{let i=yield this.getOpenFlightsAirport(e);return i?yield this.enrichWithOurAirports(i):{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."}}catch(i){return console.error("Error getting airport details:",i),{message:"Aucune donn\xE9e enrichie disponible (erreur)."}}})}getAirlineDetails(e){return T(this,null,function*(){try{let i=yield this.getOpenFlightsAirline(e);return i||{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."}}catch(i){return console.error("Error getting airline details:",i),{message:"Aucune donn\xE9e enrichie disponible (erreur)."}}})}getAircraftDetails(e){return T(this,null,function*(){try{let i=yield this.getOpenFlightsAircraft(e);return i||{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."}}catch(i){return console.error("Error getting aircraft details:",i),{message:"Aucune donn\xE9e enrichie disponible (erreur)."}}})}getOpenFlightsAirport(e){return T(this,null,function*(){try{let i=yield this.http.get(this.OPENFLIGHTS_AIRPORTS_URL,{responseType:"text"}).toPromise();return i?this.parseOpenFlightsAirportData(i,e):null}catch(i){return console.error("Error fetching OpenFlights airport data:",i),null}})}getOpenFlightsAirline(e){return T(this,null,function*(){try{let i=yield this.http.get(this.OPENFLIGHTS_AIRLINES_URL,{responseType:"text"}).toPromise();return i?this.parseOpenFlightsAirlineData(i,e):null}catch(i){return console.error("Error fetching airline data:",i),null}})}getOpenSkyAircraft(e){return T(this,null,function*(){return null})}enrichWithOurAirports(e){return T(this,null,function*(){try{let i=yield this.http.get(this.OUR_AIRPORTS_URL,{responseType:"text"}).toPromise();if(!i)return e;let n=this.parseOurAirportsData(i,e.icao);return S(P(P({},e),n),{lastUpdated:new Date().toISOString()})}catch(i){return console.error("Error enriching with OurAirports:",i),e}})}parseOpenFlightsAirportData(e,i){let n=e.split(`
`);for(let d of n){let r=d.split(",").map(m=>m.replace(/^"|"$/g,""));if(r[5]===i)return{name:r[1],city:r[2],country:r[3],iata:r[4],icao:r[5],latitude:parseFloat(r[6]),longitude:parseFloat(r[7]),altitude:parseFloat(r[8]),timezone:r[9],dst:r[10],tz:r[11],type:r[12],source:r[13],lastUpdated:new Date().toISOString()}}return null}parseOpenFlightsAirlineData(e,i){let n=e.split(`
`);for(let d of n){let r=d.split(",").map(m=>m.replace(/^"|"$/g,""));if(r[3]===i)return{name:r[1],alias:r[2]||"",iata:r[3],icao:r[4],callsign:r[5],country:r[6],active:r[7]==="Y"}}return null}parseOurAirportsData(e,i){let n=e.split(`
`),d=n[0].split(",").map(r=>r.trim());for(let r=1;r<n.length;r++){let m=n[r].split(",").map(v=>v.replace(/^"|"$/g,"")),u={};if(d.forEach((v,y)=>{u[v]=m[y]}),u.icao===i)return{terminal:u.terminal||void 0,gate:u.gate||void 0,services:u.services||void 0}}return{}}getOpenFlightsAircraft(e){return T(this,null,function*(){try{let i=yield this.http.get(this.OPENFLIGHTS_AIRCRAFT_URL,{responseType:"text"}).toPromise();return i?this.parseOpenFlightsAircraftData(i,e):null}catch(i){return console.error("Error fetching aircraft data:",i),null}})}parseOpenFlightsAircraftData(e,i){let n=e.split(`
`);for(let d of n){let r=d.split(",").map(m=>m.replace(/^"|"$/g,""));if(r[0]===i)return{icao:r[0],name:r[1],manufacturer:r[2],type:r[3],engines:parseInt(r[4],10),seats:parseInt(r[5],10),speed:parseInt(r[6],10),range:parseInt(r[7],10)}}return null}};o.\u0275fac=function(i){return new(i||o)(A(J))},o.\u0275prov=j({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var Ke=(()=>{let o=class o{constructor(e,i,n){this.firestore=e,this.http=i,this.flightEnrichment=n,this.FR24_API_KEY=ge.flightRadar24ApiKey,this.OPENAI_API_KEY=ge.openaiApiKey,this.FR24_CACHE_TTL=5*60*1e3,this.flightCache=new Map}enrichPlan(e){return T(this,null,function*(){if(!e)return e;try{switch(e.type){case"flight":return yield this.enrichFlightPlan(e);case"hotel":return yield this.enrichHotelPlan(e);case"car_rental":return yield this.enrichCarRentalPlan(e);default:return yield this.enrichGenericPlan(e)}}catch(i){return console.error("Erreur lors de l'enrichissement du plan:",i),e}})}enrichFlightPlan(e){return T(this,null,function*(){var r,m,u,v,y,R,F,B,$,H,_e;let i=((m=(r=e.details)==null?void 0:r.flight)==null?void 0:m.flight_number)||((u=e.details)==null?void 0:u.flight_number),n=(R=(y=(v=e.details)==null?void 0:v.flight)==null?void 0:y.departure)==null?void 0:R.airport,d=($=(B=(F=e.details)==null?void 0:F.flight)==null?void 0:B.arrival)==null?void 0:$.airport;if(!i||!n||!d)return e;try{let se=yield this.flightEnrichment.getAirportDetails(n),Qe=yield this.flightEnrichment.getAirportDetails(d),Xe=yield this.flightEnrichment.getAirlineDetails((_e=(H=e.details)==null?void 0:H.flight)==null?void 0:_e.airline);return S(P({},e),{details:S(P({},e.details),{flight:S(P({},e.details.flight),{departureAirport:se||{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."},arrivalAirport:Qe||{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."},airline:Xe||{message:"Aucune donn\xE9e enrichie disponible (mode d\xE9mo)."}})})})}catch(se){return console.error("Erreur enrichissement open data:",se),S(P({},e),{details:S(P({},e.details),{flight:S(P({},e.details.flight),{departureAirport:{message:"Aucune donn\xE9e enrichie disponible (erreur)."},arrivalAirport:{message:"Aucune donn\xE9e enrichie disponible (erreur)."},airline:{message:"Aucune donn\xE9e enrichie disponible (erreur)."}})})})}})}enrichHotelPlan(e){return T(this,null,function*(){try{let i=yield this.enrichWithOpenAI(e);return yield this.updatePlanInFirestore(e.id,i),i}catch(i){return console.error("Erreur lors de l'enrichissement de l'h\xF4tel:",i),e}})}enrichCarRentalPlan(e){return T(this,null,function*(){try{let i=yield this.enrichWithOpenAI(e);return yield this.updatePlanInFirestore(e.id,i),i}catch(i){return console.error("Erreur lors de l'enrichissement de la location:",i),e}})}enrichGenericPlan(e){return T(this,null,function*(){try{let i=yield this.enrichWithOpenAI(e);return yield this.updatePlanInFirestore(e.id,i),i}catch(i){return console.error("Erreur lors de l'enrichissement g\xE9n\xE9rique:",i),e}})}getFlightData(e){return T(this,null,function*(){return null})}enrichWithOpenAI(e,i){return T(this,null,function*(){try{let n=this.buildOpenAIPrompt(e,i),d=yield this.http.post("https://api.openai.com/v1/chat/completions",{model:"gpt-4",messages:[{role:"system",content:"Tu es un assistant sp\xE9cialis\xE9 dans l'enrichissement de donn\xE9es de voyage. Ta t\xE2che est d'enrichir les informations fournies avec des d\xE9tails pertinents et utiles."},{role:"user",content:n}],temperature:.7},{headers:{Authorization:`Bearer ${this.OPENAI_API_KEY}`,"Content-Type":"application/json"}}).toPromise();return this.mergeOpenAIData(e,d)}catch(n){return console.error("Erreur OpenAI:",n),e}})}buildOpenAIPrompt(e,i){let n=`Enrichis les informations suivantes sur un plan de voyage :
`;return n+=`Type: ${e.type}
`,n+=`Titre: ${e.title}
`,n+=`Dates: ${e.startDate} - ${e.endDate}
`,e.details&&(n+=`D\xE9tails actuels: ${JSON.stringify(e.details,null,2)}
`),i&&(n+=`Donn\xE9es FlightRadar24: ${JSON.stringify(i,null,2)}
`),n+=`
Ajoute des informations pertinentes comme :
`,n+=`- Descriptions d\xE9taill\xE9es
`,n+=`- Informations pratiques
`,n+=`- Suggestions connexes
`,n+=`- Conseils utiles
`,n+="R\xE9ponds au format JSON.",n}mergeOpenAIData(e,i){try{let n=JSON.parse(i.choices[0].message.content);return S(P({},e),{details:S(P({},e.details),{enriched:n})})}catch(n){return console.error("Erreur lors de la fusion des donn\xE9es OpenAI:",n),e}}getCachedFlightData(e){let i=this.flightCache.get(e);return i&&Date.now()-i.timestamp<this.FR24_CACHE_TTL?i.data:null}cacheFlightData(e,i){this.flightCache.set(e,{data:i,timestamp:Date.now()})}updatePlanInFirestore(e,i){return T(this,null,function*(){try{let n=Se(this.firestore,"plans",e);yield be(n,{details:i.details,lastEnriched:new Date})}catch(n){console.error("Erreur lors de la mise \xE0 jour Firestore:",n)}})}};o.\u0275fac=function(i){return new(i||o)(A(X),A(J),A(Ye))},o.\u0275prov=j({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var Je=(()=>{let o=class o{constructor(e,i,n,d){this.auth=i,this.planEnrichmentService=n,this.demoService=d,this.firestore=e}getTrips(){return T(this,null,function*(){var u;let e=(u=this.auth.currentUser)==null?void 0:u.uid;if(!e)return{upcoming:[],ongoing:[],past:[]};let i=ce(this.firestore,"trips"),n=de(i,ue("userId","==",e)),d=yield pe(n),r=new Date,m=d.docs.map(v=>{var $,H;let y=v.data(),R=($=y.startDate)!=null&&$.toDate?y.startDate.toDate():new Date(y.startDate),F=(H=y.endDate)!=null&&H.toDate?y.endDate.toDate():new Date(y.endDate),B="upcoming";return F<r?B="past":R<=r&&F>=r&&(B="ongoing"),S(P({},y),{id:v.id,title:typeof y.title=="object"?y.title[this.demoService.getLang()]||y.title.fr:y.title,status:B,userId:e,startDate:R,endDate:F})});return{upcoming:m.filter(v=>v.status==="upcoming"),ongoing:m.filter(v=>v.status==="ongoing"),past:m.filter(v=>v.status==="past")}})}getPlansForTrip(e){return T(this,null,function*(){try{console.log("[DEBUG] tripId utilis\xE9 pour la requ\xEAte:",e,"| type:",typeof e);let i=ce(this.firestore,"plans"),n=de(i,ue("tripId","==",String(e)),Ee("startDate","asc")),r=(yield pe(n)).docs.map(m=>{var v,y,R,F;let u=m.data();return console.log("[DEBUG] plan Firestore:",m.id,"| tripId:",u.tripId,"| type:",typeof u.tripId),S(P({id:m.id},u),{startDate:(v=u.startDate)!=null&&v.toDate?u.startDate.toDate():u.startDate,endDate:(y=u.endDate)!=null&&y.toDate?u.endDate.toDate():u.endDate,createdAt:(R=u.createdAt)!=null&&R.toDate?u.createdAt.toDate():u.createdAt,updatedAt:(F=u.updatedAt)!=null&&F.toDate?u.updatedAt.toDate():u.updatedAt})});return console.log("[DEBUG] plans bruts Firestore:",r),r}catch(i){throw console.error("Erreur Firestore getPlansForTrip:",i),new Error("FIRESTORE_ERROR")}})}};o.\u0275fac=function(i){return new(i||o)(A(X),A(Q),A(Ke),A(Pe))},o.\u0275prov=j({token:o,factory:o.\u0275fac,providedIn:"root"});let a=o;return a})();var oe=(a,o)=>({$implicit:a,index:o});function ot(a,o){a&1&&(s(0,"div",37),h(1,"ion-spinner",38),s(2,"p"),p(3),g(4,"translate"),c()()),a&2&&(l(3),f(D(4,1,"TRIPS.LOADING")))}function st(a,o){a&1&&(s(0,"div",40),h(1,"ion-icon",41),s(2,"h1"),p(3),g(4,"translate"),c(),s(5,"p",42),p(6),g(7,"translate"),c()()),a&2&&(l(3),f(D(4,2,"PAGES.TRIPS.TITLE")),l(3),f(D(7,4,"TRIPS.ERROR_FIRESTORE")))}function ct(a,o){a&1&&(s(0,"div",62),p(1),g(2,"translate"),c()),a&2&&(l(),f(D(2,1,"TRIPS.NO_PLANS")))}function pt(a,o){if(a&1&&(b(0),h(1,"app-flight-details",64),C()),a&2){let t=I().$implicit;l(),_("flightData",t)("flightNumber",(t.details==null||t.details.flight==null?null:t.details.flight.flight_number)||(t.details==null?null:t.details.flight_number))("departureIcao",(t.details==null||t.details.flight==null||t.details.flight.departure==null?null:t.details.flight.departure.airport)||(t.details==null||t.details.departure==null?null:t.details.departure.airport))("arrivalIcao",(t.details==null||t.details.flight==null||t.details.flight.arrival==null?null:t.details.flight.arrival.airport)||(t.details==null||t.details.arrival==null?null:t.details.arrival.airport))("airlineIata",(t.details==null||t.details.flight==null?null:t.details.flight.airline)||(t.details==null?null:t.details.airline))("aircraftIcao",(t.details==null||t.details.flight==null?null:t.details.flight.aircraft)||(t.details==null?null:t.details.aircraft))}}function dt(a,o){a&1&&V(0)}function ut(a,o){if(a&1&&x(0,dt,1,0,"ng-container",65),a&2){let t=I(),e=t.$implicit,i=t.index;I(7);let n=w(68);_("ngTemplateOutlet",n)("ngTemplateOutletContext",W(2,oe,e,i))}}function gt(a,o){if(a&1&&(s(0,"div",63),x(1,pt,2,6,"ng-container",45)(2,ut,1,5,"ng-template",null,1,N),c()),a&2){let t=o.$implicit,e=w(3);l(),_("ngIf",(t.type==null?null:t.type.toLowerCase().trim())==="flight")("ngIfElse",e)}}function _t(a,o){if(a&1&&(s(0,"div",59),x(1,ct,3,3,"div",60)(2,gt,4,2,"div",61),c()),a&2){let t=I(6);l(),_("ngIf",t.plans.length===0),l(),_("ngForOf",t.plans)}}function mt(a,o){if(a&1){let t=G();s(0,"div",47)(1,"div",48)(2,"div",49),h(3,"ion-icon",50),s(4,"span",51),p(5),c(),s(6,"ion-badge",52),p(7),g(8,"translate"),c()(),s(9,"div",53),h(10,"ion-icon",54),s(11,"span"),p(12),g(13,"date"),g(14,"date"),c()(),s(15,"div",55)(16,"ion-button",56),U("click",function(){let i=L(t).$implicit,n=I(5);return k(n.onTripClick(i))}),h(17,"ion-icon",57),p(18),g(19,"translate"),c()(),x(20,_t,3,2,"div",58),c()()}if(a&2){let t=o.$implicit,e=I(5);l(5),f(t.title),l(2),f(D(8,7,"TRIPS.ONGOING")),l(5),M("",E(13,9,e.getTripDateRange(t).start,e.getDateFormat())," - ",E(14,12,e.getTripDateRange(t).end,e.getDateFormat()),""),l(5),_("name",e.selectedTripId===t.id?"chevron-up-outline":"chevron-down-outline"),l(),O(" ",D(19,15,"TRIPS.SHOW_ITINERARY")," "),l(2),_("ngIf",e.selectedTripId===t.id)}}function ft(a,o){if(a&1&&(b(0),x(1,mt,21,17,"div",46),C()),a&2){let t=I(4);l(),_("ngForOf",t.trips.ongoing)}}function ht(a,o){a&1&&(s(0,"div",66),h(1,"ion-icon",67),s(2,"h1"),p(3),g(4,"translate"),c(),s(5,"p"),p(6),g(7,"translate"),c()()),a&2&&(l(3),f(D(4,2,"PAGES.TRIPS.TITLE")),l(3),f(D(7,4,"TRIPS.NO_TRIPS")))}function vt(a,o){if(a&1&&(b(0),x(1,ft,2,1,"ng-container",45)(2,ht,8,6,"ng-template",null,2,N),C()),a&2){let t=w(3),e=I(3);l(),_("ngIf",e.trips.ongoing.length>0)("ngIfElse",t)}}function Dt(a,o){a&1&&(s(0,"div",62),p(1),g(2,"translate"),c()),a&2&&(l(),f(D(2,1,"TRIPS.NO_PLANS")))}function It(a,o){if(a&1&&(b(0),h(1,"app-flight-details",64),C()),a&2){let t=I().$implicit;l(),_("flightData",t)("flightNumber",(t.details==null||t.details.flight==null?null:t.details.flight.flight_number)||(t.details==null?null:t.details.flight_number))("departureIcao",(t.details==null||t.details.flight==null||t.details.flight.departure==null?null:t.details.flight.departure.airport)||(t.details==null||t.details.departure==null?null:t.details.departure.airport))("arrivalIcao",(t.details==null||t.details.flight==null||t.details.flight.arrival==null?null:t.details.flight.arrival.airport)||(t.details==null||t.details.arrival==null?null:t.details.arrival.airport))("airlineIata",(t.details==null||t.details.flight==null?null:t.details.flight.airline)||(t.details==null?null:t.details.airline))("aircraftIcao",(t.details==null||t.details.flight==null?null:t.details.flight.aircraft)||(t.details==null?null:t.details.aircraft))}}function xt(a,o){a&1&&V(0)}function yt(a,o){if(a&1&&x(0,xt,1,0,"ng-container",65),a&2){let t=I(),e=t.$implicit,i=t.index;I(7);let n=w(68);_("ngTemplateOutlet",n)("ngTemplateOutletContext",W(2,oe,e,i))}}function Tt(a,o){if(a&1&&(s(0,"div",63),x(1,It,2,6,"ng-container",45)(2,yt,1,5,"ng-template",null,1,N),c()),a&2){let t=o.$implicit,e=w(3);l(),_("ngIf",(t.type==null?null:t.type.toLowerCase().trim())==="flight")("ngIfElse",e)}}function Pt(a,o){if(a&1&&(s(0,"div",59),x(1,Dt,3,3,"div",60)(2,Tt,4,2,"div",61),c()),a&2){let t=I(6);l(),_("ngIf",t.plans.length===0),l(),_("ngForOf",t.plans)}}function St(a,o){if(a&1){let t=G();s(0,"div",69)(1,"div",48)(2,"div",49),h(3,"ion-icon",50),s(4,"span",51),p(5),c(),s(6,"ion-badge",7),p(7),g(8,"translate"),c()(),s(9,"div",53),h(10,"ion-icon",54),s(11,"span"),p(12),g(13,"date"),g(14,"date"),c()(),s(15,"div",55)(16,"ion-button",56),U("click",function(){let i=L(t).$implicit,n=I(5);return k(n.onTripClick(i))}),h(17,"ion-icon",57),p(18),g(19,"translate"),c()(),x(20,Pt,3,2,"div",58),c()()}if(a&2){let t=o.$implicit,e=I(5);l(5),f(t.title),l(2),f(D(8,7,"TRIPS.UPCOMING")),l(5),M("",E(13,9,e.getTripDateRange(t).start,e.getDateFormat())," - ",E(14,12,e.getTripDateRange(t).end,e.getDateFormat()),""),l(5),_("name",e.selectedTripId===t.id?"chevron-up-outline":"chevron-down-outline"),l(),O(" ",D(19,15,"TRIPS.SHOW_ITINERARY")," "),l(2),_("ngIf",e.selectedTripId===t.id)}}function Et(a,o){if(a&1&&(b(0),x(1,St,21,17,"div",68),C()),a&2){let t=I(4);l(),_("ngForOf",t.trips.upcoming)}}function bt(a,o){a&1&&(s(0,"div",66),h(1,"ion-icon",70),s(2,"h1"),p(3),g(4,"translate"),c(),s(5,"p"),p(6),g(7,"translate"),c()()),a&2&&(l(3),f(D(4,2,"PAGES.TRIPS.TITLE")),l(3),f(D(7,4,"TRIPS.NO_TRIPS")))}function Ct(a,o){if(a&1&&(b(0),x(1,Et,2,1,"ng-container",45)(2,bt,8,6,"ng-template",null,3,N),C()),a&2){let t=w(3),e=I(3);l(),_("ngIf",e.trips.upcoming.length>0)("ngIfElse",t)}}function Ot(a,o){a&1&&(s(0,"div",62),p(1),g(2,"translate"),c()),a&2&&(l(),f(D(2,1,"TRIPS.NO_PLANS")))}function At(a,o){if(a&1&&(b(0),h(1,"app-flight-details",64),C()),a&2){let t=I().$implicit;l(),_("flightData",t)("flightNumber",(t.details==null||t.details.flight==null?null:t.details.flight.flight_number)||(t.details==null?null:t.details.flight_number))("departureIcao",(t.details==null||t.details.flight==null||t.details.flight.departure==null?null:t.details.flight.departure.airport)||(t.details==null||t.details.departure==null?null:t.details.departure.airport))("arrivalIcao",(t.details==null||t.details.flight==null||t.details.flight.arrival==null?null:t.details.flight.arrival.airport)||(t.details==null||t.details.arrival==null?null:t.details.arrival.airport))("airlineIata",(t.details==null||t.details.flight==null?null:t.details.flight.airline)||(t.details==null?null:t.details.airline))("aircraftIcao",(t.details==null||t.details.flight==null?null:t.details.flight.aircraft)||(t.details==null?null:t.details.aircraft))}}function wt(a,o){a&1&&V(0)}function Rt(a,o){if(a&1&&x(0,wt,1,0,"ng-container",65),a&2){let t=I(),e=t.$implicit,i=t.index;I(7);let n=w(68);_("ngTemplateOutlet",n)("ngTemplateOutletContext",W(2,oe,e,i))}}function Ft(a,o){if(a&1&&(s(0,"div",63),x(1,At,2,6,"ng-container",45)(2,Rt,1,5,"ng-template",null,1,N),c()),a&2){let t=o.$implicit,e=w(3);l(),_("ngIf",(t.type==null?null:t.type.toLowerCase().trim())==="flight")("ngIfElse",e)}}function Nt(a,o){if(a&1&&(s(0,"div",59),x(1,Ot,3,3,"div",60)(2,Ft,4,2,"div",61),c()),a&2){let t=I(6);l(),_("ngIf",t.plans.length===0),l(),_("ngForOf",t.plans)}}function Mt(a,o){if(a&1){let t=G();s(0,"div",72)(1,"div",48)(2,"div",49),h(3,"ion-icon",50),s(4,"span",51),p(5),c(),s(6,"ion-badge",73),p(7),g(8,"translate"),c()(),s(9,"div",53),h(10,"ion-icon",54),s(11,"span"),p(12),g(13,"date"),g(14,"date"),c()(),s(15,"div",55)(16,"ion-button",56),U("click",function(){let i=L(t).$implicit,n=I(5);return k(n.onTripClick(i))}),h(17,"ion-icon",57),p(18),g(19,"translate"),c()(),x(20,Nt,3,2,"div",58),c()()}if(a&2){let t=o.$implicit,e=I(5);l(5),f(t.title),l(2),f(D(8,7,"TRIPS.PAST")),l(5),M("",E(13,9,e.getTripDateRange(t).start,e.getDateFormat())," - ",E(14,12,e.getTripDateRange(t).end,e.getDateFormat()),""),l(5),_("name",e.selectedTripId===t.id?"chevron-up-outline":"chevron-down-outline"),l(),O(" ",D(19,15,"TRIPS.SHOW_ITINERARY")," "),l(2),_("ngIf",e.selectedTripId===t.id)}}function Lt(a,o){if(a&1&&(b(0),x(1,Mt,21,17,"div",71),C()),a&2){let t=I(4);l(),_("ngForOf",t.trips.past)}}function kt(a,o){a&1&&(s(0,"div",66),h(1,"ion-icon",74),s(2,"h1"),p(3),g(4,"translate"),c(),s(5,"p"),p(6),g(7,"translate"),c()()),a&2&&(l(3),f(D(4,2,"PAGES.TRIPS.TITLE")),l(3),f(D(7,4,"TRIPS.NO_TRIPS")))}function Bt(a,o){if(a&1&&(b(0),x(1,Lt,2,1,"ng-container",45)(2,kt,8,6,"ng-template",null,4,N),C()),a&2){let t=w(3),e=I(3);l(),_("ngIf",e.trips.past.length>0)("ngIfElse",t)}}function jt(a,o){if(a&1&&(b(0)(1,43),x(2,vt,4,2,"ng-container",44)(3,Ct,4,2,"ng-container",44)(4,Bt,4,2,"ng-container",44),C()()),a&2){let t=I(2);l(),_("ngSwitch",t.selectedTab),l(),_("ngSwitchCase","ongoing"),l(),_("ngSwitchCase","upcoming"),l(),_("ngSwitchCase","past")}}function Gt(a,o){if(a&1&&(b(0),x(1,st,8,6,"div",39)(2,jt,5,4,"ng-container",36),C()),a&2){let t=I();l(),_("ngIf",t.errorFirestore),l(),_("ngIf",!t.errorFirestore)}}function Ut(a,o){if(a&1&&(s(0,"ion-item",85),h(1,"ion-icon",86),s(2,"ion-label")(3,"b"),p(4),c()(),s(5,"div",87),p(6),c()()),a&2){let t=o.$implicit;l(),_("name",t.icon),l(3),f(t.label),l(2),f(t.value)}}function $t(a,o){a&1&&(s(0,"ion-item",85)(1,"ion-label")(2,"i"),p(3,"Aucun d\xE9tail disponible"),c()()())}function Ht(a,o){if(a&1&&(s(0,"ion-card-content")(1,"ion-list",82),x(2,Ut,7,3,"ion-item",83)(3,$t,4,0,"ion-item",84),c()()),a&2){let t=I().index,e=I();l(2),_("ngForOf",e.planDetailsDisplay[t]),l(),_("ngIf",(e.planDetailsDisplay[t]==null?null:e.planDetailsDisplay[t].length)===0)}}function zt(a,o){if(a&1){let t=G();s(0,"ion-card",75)(1,"ion-card-header")(2,"ion-item",76),h(3,"ion-icon",77),s(4,"ion-label")(5,"div",78),p(6),c(),s(7,"div",79),p(8),g(9,"date"),g(10,"date"),g(11,"date"),g(12,"date"),c(),s(13,"div",80),p(14),g(15,"translate"),c()(),s(16,"ion-button",81),U("click",function(i){let n=L(t).index;return I().togglePlanDetails(n),k(i.stopPropagation())}),h(17,"ion-icon",57),p(18),c()()(),x(19,Ht,4,2,"ion-card-content",36),c()}if(a&2){let t=o.$implicit,e=o.index,i=I();l(3),_("name",i.getPlanIcon(t==null?null:t.type)),l(3),f((t==null?null:t.title)||"-"),l(2),M(" ",!(t==null||t.startDate==null)&&t.startDate.toDate?E(9,8,t.startDate.toDate(),i.getDateFormat()):E(10,11,t==null?null:t.startDate,i.getDateFormat())," - ",!(t==null||t.endDate==null)&&t.endDate.toDate?E(11,14,t.endDate.toDate(),i.getDateFormat()):E(12,17,t==null?null:t.endDate,i.getDateFormat())," "),l(6),O("Type : ",D(15,20,"TRIPS."+((t==null?null:t.type)||"unknown")),""),l(3),_("name",i.openedPlanIndex===e?"chevron-up-outline":"chevron-down-outline"),l(),O(" ",i.openedPlanIndex===e?"Masquer le d\xE9tail":"Voir le d\xE9tail"," "),l(),_("ngIf",i.openedPlanIndex===e)}}function Vt(a,o){a&1&&V(0)}function Wt(a,o){if(a&1&&x(0,Vt,1,0,"ng-container",65),a&2){let t=o.$implicit,e=o.index;I();let i=w(68);_("ngTemplateOutlet",i)("ngTemplateOutletContext",W(2,oe,t,e))}}var _i=(()=>{let o=class o{hasPlanDetails(e){return!!this.planDetailsDisplay&&!!this.planDetailsDisplay[e]&&Array.isArray(this.planDetailsDisplay[e])&&this.planDetailsDisplay[e].length>0}constructor(e,i,n,d){this.auth=e,this.authService=i,this.tripService=n,this.router=d,this.trips={upcoming:[],ongoing:[],past:[]},this.loading=!0,this.errorFirestore=!1,this.userId=null,this.selectedTripId=null,this.plans=[],this.planDetailsDisplay=[],this.selectedTab="ongoing",this.openedPlanIndex=null,this.currentUserEmail=null}ngOnInit(){return T(this,null,function*(){var e,i;this.userId=((e=this.authService.currentUser)==null?void 0:e.uid)||null,this.loading=!0,this.errorFirestore=!1;try{let n=yield this.tripService.getTrips(),d=new Date;this.trips={upcoming:[],ongoing:[],past:[]};for(let r of[...n.upcoming,...n.ongoing,...n.past]){let m,u;r.startDate instanceof Date?m=r.startDate:r.startDate&&typeof r.startDate.toDate=="function"?m=r.startDate.toDate():m=new Date(r.startDate),r.endDate instanceof Date?u=r.endDate:r.endDate&&typeof r.endDate.toDate=="function"?u=r.endDate.toDate():u=new Date(r.endDate);let v="";m<=d&&u>=d?(this.trips.ongoing.push(r),v="ongoing"):m>d?(this.trips.upcoming.push(r),v="upcoming"):u<d?(this.trips.past.push(r),v="past"):v="ignored",console.log("[TRIP DEBUG]",{id:r.id,title:r.title,start:m,end:u,cat:v})}}catch{this.errorFirestore=!0,this.trips={upcoming:[],ongoing:[],past:[]}}this.loading=!1,this.currentUserEmail=((i=this.auth.currentUser)==null?void 0:i.email)||null})}toggleMenu(){let e=document.querySelector("ion-menu");e==null||e.toggle()}logout(){return T(this,null,function*(){yield this.auth.signOut(),this.router.navigate(["/auth"])})}onTripClick(e){return T(this,null,function*(){if(this.selectedTripId===e.id){this.selectedTripId=null,this.plans=[],this.planDetailsDisplay=[];return}this.selectedTripId=e.id;try{let i=yield this.tripService.getPlansForTrip(e.id);i=i.filter(n=>n&&n.type&&n.type!=="unknown"&&n.type!=="-"&&n.title&&n.title!=="-"),this.plans=i,console.log("[DEBUG] plans filtr\xE9s:",this.plans),this.plans.forEach((n,d)=>{console.log(`[DEBUG] Plan[${d}]`,n)}),this.planDetailsDisplay=this.plans.map(n=>this.safeGetPlanDetailsDisplay(n))}catch(i){console.error("Erreur lors de la r\xE9cup\xE9ration des plans:",i),this.plans=[],this.planDetailsDisplay=[]}})}getPlanIcon(e){switch(e){case"flight":return"airplane-outline";case"car_rental":return"car-outline";case"hotel":return"home-outline";case"train":return"train-outline";case"ferry":return"boat-outline";case"restaurant":return"restaurant-outline";case"activity":return"star-outline";case"meeting":return"calendar-outline";default:return"help-circle-outline"}}getTripDateRange(e){if(this.selectedTripId===e.id&&this.plans.length>0){let i=[...this.plans].sort((u,v)=>{let y=u.startDate&&typeof u.startDate.toDate=="function"?u.startDate.toDate():u.startDate instanceof Date?u.startDate:new Date(u.startDate),R=v.startDate&&typeof v.startDate.toDate=="function"?v.startDate.toDate():v.startDate instanceof Date?v.startDate:new Date(v.startDate);return y.getTime()-R.getTime()}),n=i[0],d=i[i.length-1],r=n.startDate instanceof Date?n.startDate:n.startDate&&typeof n.startDate.toDate=="function"?n.startDate.toDate():new Date(n.startDate),m=d.endDate instanceof Date?d.endDate:d.endDate&&typeof d.endDate.toDate=="function"?d.endDate.toDate():new Date(d.endDate);return{start:r,end:m}}else{let i=e.startDate instanceof Date?e.startDate:e.startDate&&typeof e.startDate.toDate=="function"?e.startDate.toDate():new Date(e.startDate),n=e.endDate instanceof Date?e.endDate:e.endDate&&typeof e.endDate.toDate=="function"?e.endDate.toDate():new Date(e.endDate);return{start:i,end:n}}}getDateFormat(){return(localStorage.getItem("lang")||"en")==="fr"?"EEEE d MMMM y HH'h'mm":"short"}togglePlanDetails(e){e!=null&&(this.openedPlanIndex=this.openedPlanIndex===e?null:e)}safeGetPlanDetailsDisplay(e){try{if(!e||typeof e!="object"||!e.details)return[];let i=e.type,n=e.details[i]&&typeof e.details[i]=="object"?e.details[i]:e.details;if(!n||typeof n!="object")return[];let d=this.flattenPlanDetails(i,n);return console.log("[DEBUG] planDetailsDisplay for",i,e.title,d),d}catch{return[]}}flattenPlanDetails(e,i){let n={flight_number:{label:"Num\xE9ro de vol",icon:"airplane-outline"},airline:{label:"Compagnie",icon:"business-outline"},class:{label:"Classe",icon:"ribbon-outline"},seat:{label:"Si\xE8ge",icon:"person-outline"},booking_reference:{label:"R\xE9f\xE9rence",icon:"pricetag-outline"},company:{label:"Soci\xE9t\xE9",icon:"car-outline"},car_type:{label:"Type de voiture",icon:"car-outline"},pickup_location:{label:"Lieu de prise en charge",icon:"pin-outline"},dropoff_location:{label:"Lieu de retour",icon:"pin-outline"},name:{label:"Nom",icon:"home-outline"},room_type:{label:"Type de chambre",icon:"bed-outline"},check_in_time:{label:"Check-in",icon:"log-in-outline"},check_out_time:{label:"Check-out",icon:"log-out-outline"},confirmation_number:{label:"Confirmation",icon:"pricetag-outline"},description:{label:"Description",icon:"information-circle-outline"},duration:{label:"Dur\xE9e",icon:"time-outline"},train_number:{label:"Num\xE9ro de train",icon:"train-outline"},operator:{label:"Op\xE9rateur",icon:"business-outline"},cuisine:{label:"Cuisine",icon:"restaurant-outline"},reservation_time:{label:"Heure de r\xE9servation",icon:"time-outline"},party_size:{label:"Nombre de personnes",icon:"people-outline"},reservation_number:{label:"Num\xE9ro de r\xE9servation",icon:"pricetag-outline"},attendees:{label:"Participants",icon:"people-outline"},meeting_link:{label:"Lien",icon:"link-outline"}},d=[];if(e==="car_rental"){let r=[{key:"car_type",label:"Type de voiture",icon:"car-outline"},{key:"booking_reference",label:"R\xE9f\xE9rence",icon:"pricetag-outline"},{key:"pickup_location",label:"Lieu de prise en charge",icon:"pin-outline"},{key:"dropoff_location",label:"Lieu de retour",icon:"pin-outline"},{key:"company",label:"Soci\xE9t\xE9",icon:"business-outline"}],m=!1;for(let u of r)i[u.key]&&(d.push({label:u.label,value:i[u.key],icon:u.icon}),m=!0);return m||d.push({label:"Aucun d\xE9tail disponible",value:"",icon:"help-circle-outline"}),d}if(i.departure&&typeof i.departure=="object"){let r=i.departure;(r.airport||r.station||r.port)&&d.push({label:"D\xE9part",value:r.airport||r.station||r.port,icon:"log-out-outline"}),r.terminal&&d.push({label:"Terminal d\xE9part",value:r.terminal,icon:"pin-outline"}),r.gate&&d.push({label:"Porte d\xE9part",value:r.gate,icon:"exit-outline"})}for(let r of Object.keys(i))i[r]&&n[r]&&typeof i[r]!="object"&&d.push({label:n[r].label,value:i[r],icon:n[r].icon});if(i.arrival&&typeof i.arrival=="object"){let r=i.arrival;(r.airport||r.station||r.port)&&d.push({label:"Arriv\xE9e",value:r.airport||r.station||r.port,icon:"log-in-outline"}),r.terminal&&d.push({label:"Terminal arriv\xE9e",value:r.terminal,icon:"pin-outline"}),r.gate&&d.push({label:"Porte arriv\xE9e",value:r.gate,icon:"enter-outline"})}for(let r of Object.keys(i))i[r]&&n[r]&&typeof i[r]=="object"&&["departure","arrival"].includes(r);return d}objectKeys(e){return e?Object.keys(e):[]}};o.\u0275fac=function(i){return new(i||o)(z(Q),z(We),z(Je),z(Te))},o.\u0275cmp=q({type:o,selectors:[["app-trips"]],decls:71,vars:51,consts:[["defaultPlanDisplay",""],["nonFlightPlanDisplay",""],["noOngoing",""],["noUpcoming",""],["noPast",""],[3,"title","user"],[3,"contentId"],["color","primary"],["routerLink","/trips"],["name","airplane-outline","slot","start"],["routerLink","/window"],["name","map-outline","slot","start"],["routerLink","/chat"],["name","chatbubbles-outline","slot","start"],["routerLink","/bobbers"],["name","people-outline","slot","start"],["routerLink","/games"],["name","game-controller-outline","slot","start"],["routerLink","/notifications"],["name","notifications-outline","slot","start"],["routerLink","/documents"],["name","document-outline","slot","start"],["routerLink","/support"],["name","help-circle-outline","slot","start"],["routerLink","/preferences"],["name","settings-outline","slot","start"],["color","danger",3,"click"],["name","log-out-outline","slot","start"],["id","main-content",1,"ion-padding","trips-content"],[1,"trips-header"],[1,"trips-subtitle"],[1,"trips-segment",3,"ngModelChange","ngModel"],["value","ongoing"],["value","upcoming"],["value","past"],["class","loading-spinner-modern",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner-modern"],["name","dots"],["class","placeholder-container error",4,"ngIf"],[1,"placeholder-container","error"],["name","alert-circle-outline",1,"placeholder-icon","error"],[1,"error-text"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngIf","ngIfElse"],["class","trip-card-timeline success",4,"ngFor","ngForOf"],[1,"trip-card-timeline","success"],[1,"trip-timeline-content"],[1,"trip-timeline-header"],["name","airplane-outline",1,"trip-icon"],[1,"trip-title"],["color","success"],[1,"trip-timeline-dates"],["name","calendar-outline",1,"trip-date-icon"],[1,"trip-timeline-actions"],["fill","clear","size","small","color","primary",3,"click"],[3,"name"],["class","plans-timeline-list",4,"ngIf"],[1,"plans-timeline-list"],["class","plans-placeholder",4,"ngIf"],["class","plan-timeline-item",4,"ngFor","ngForOf"],[1,"plans-placeholder"],[1,"plan-timeline-item"],[3,"flightData","flightNumber","departureIcao","arrivalIcao","airlineIata","aircraftIcao"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"placeholder-container"],["name","airplane-outline",1,"placeholder-icon"],["class","trip-card-timeline primary",4,"ngFor","ngForOf"],[1,"trip-card-timeline","primary"],["name","calendar-outline",1,"placeholder-icon"],["class","trip-card-timeline medium",4,"ngFor","ngForOf"],[1,"trip-card-timeline","medium"],["color","medium"],["name","time-outline",1,"placeholder-icon"],[1,"plan-card"],["lines","none",1,"plan-header-item"],["slot","start",1,"plan-icon",3,"name"],[1,"plan-title"],[1,"plan-dates"],[1,"plan-type"],["fill","clear","size","small",2,"margin-left","auto",3,"click"],[1,"plan-details-list"],["lines","none",4,"ngFor","ngForOf"],["lines","none",4,"ngIf"],["lines","none"],["slot","start",3,"name"],["slot","end"]],template:function(i,n){if(i&1){let d=G();h(0,"app-user-header",5),s(1,"ion-menu",6)(2,"ion-header")(3,"ion-toolbar",7)(4,"ion-title"),p(5),g(6,"translate"),c()()(),s(7,"ion-content")(8,"ion-list")(9,"ion-item",8),h(10,"ion-icon",9),p(11),g(12,"translate"),c(),s(13,"ion-item",10),h(14,"ion-icon",11),p(15),g(16,"translate"),c(),s(17,"ion-item",12),h(18,"ion-icon",13),p(19),g(20,"translate"),c(),s(21,"ion-item",14),h(22,"ion-icon",15),p(23),g(24,"translate"),c(),s(25,"ion-item",16),h(26,"ion-icon",17),p(27),g(28,"translate"),c(),s(29,"ion-item",18),h(30,"ion-icon",19),p(31),g(32,"translate"),c(),s(33,"ion-item",20),h(34,"ion-icon",21),p(35),g(36,"translate"),c(),s(37,"ion-item",22),h(38,"ion-icon",23),p(39),g(40,"translate"),c(),s(41,"ion-item",24),h(42,"ion-icon",25),p(43),g(44,"translate"),c(),s(45,"ion-item",26),U("click",function(){return L(d),k(n.logout())}),h(46,"ion-icon",27),p(47),g(48,"translate"),c()()()(),s(49,"ion-content",28)(50,"div",29)(51,"h1"),p(52,"Mes Voyages"),c(),s(53,"div",30),p(54,"Organisez vos trajets \xE0 venir"),c()(),s(55,"ion-segment",31),he("ngModelChange",function(m){return L(d),fe(n.selectedTab,m)||(n.selectedTab=m),k(m)}),s(56,"ion-segment-button",32),p(57),g(58,"translate"),c(),s(59,"ion-segment-button",33),p(60),g(61,"translate"),c(),s(62,"ion-segment-button",34),p(63),g(64,"translate"),c()(),x(65,ot,5,3,"div",35)(66,Gt,3,2,"ng-container",36),c(),x(67,zt,20,22,"ng-template",null,0,N)(69,Wt,1,5,"ng-template",null,1,N)}i&2&&(_("title","Mes Voyages")("user",n.auth.currentUser),l(),_("contentId","main-content"),l(4),f(D(6,23,"LANDING.TITLE")),l(6),f(D(12,25,"LANDING.TILES.TRIPS")),l(4),f(D(16,27,"LANDING.TILES.WINDOW")),l(4),f(D(20,29,"LANDING.TILES.CHAT")),l(4),f(D(24,31,"LANDING.TILES.BOBBERS")),l(4),f(D(28,33,"LANDING.TILES.GAMES")),l(4),f(D(32,35,"LANDING.TILES.NOTIFICATIONS")),l(4),f(D(36,37,"LANDING.TILES.DOCUMENTS")),l(4),f(D(40,39,"LANDING.TILES.SUPPORT")),l(4),f(D(44,41,"LANDING.TILES.PREFERENCES")),l(4),f(D(48,43,"COMMON.LOGOUT")),l(8),me("ngModel",n.selectedTab),l(2),M(" ",D(58,45,"TRIPS.ONGOING")," (",n.trips.ongoing.length,") "),l(3),M(" ",D(61,47,"TRIPS.UPCOMING")," (",n.trips.upcoming.length,") "),l(3),M(" ",D(64,49,"TRIPS.PAST")," (",n.trips.past.length,") "),l(2),_("ngIf",n.loading),l(),_("ngIf",!n.loading))},dependencies:[K,ve,De,ye,Ie,xe,Y,re,Re,Fe,Z,ee,te,Ne,Me,ie,ne,ae,Le,ke,Be,je,Ge,Ue,$e,we,He,Ve,ze,Ae,Ce,Oe,qe],styles:[".loading-spinner-modern[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:40vh;color:#00bcd4}.trip-timeline-list[_ngcontent-%COMP%]{margin-top:16px}.trip-group[_ngcontent-%COMP%]{margin-bottom:32px}.trip-group-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;margin-bottom:12px;margin-left:8px}.trip-group-title.success[_ngcontent-%COMP%]{color:#43a047}.trip-group-title.primary[_ngcontent-%COMP%]{color:#1976d2}.trip-group-title.medium[_ngcontent-%COMP%]{color:#757575}.trip-card-timeline[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;background:#fff;border-radius:12px;box-shadow:0 2px 8px #00000012;margin-bottom:18px;padding:0;position:relative;transition:box-shadow .2s}.trip-card-timeline.success[_ngcontent-%COMP%]{border-left:5px solid #43a047}.trip-card-timeline.primary[_ngcontent-%COMP%]{border-left:5px solid #1976d2}.trip-card-timeline.medium[_ngcontent-%COMP%]{border-left:5px solid #757575}.trip-timeline-bar[_ngcontent-%COMP%]{width:32px;display:flex;flex-direction:column;align-items:center;margin-top:18px}.trip-timeline-dot[_ngcontent-%COMP%]{width:16px;height:16px;border-radius:50%;background:#00bcd4;border:3px solid #fff;box-shadow:0 0 0 2px #00bcd4;margin-bottom:4px}.trip-timeline-dot.success[_ngcontent-%COMP%]{background:#43a047;box-shadow:0 0 0 2px #43a047}.trip-timeline-dot.primary[_ngcontent-%COMP%]{background:#1976d2;box-shadow:0 0 0 2px #1976d2}.trip-timeline-dot.medium[_ngcontent-%COMP%]{background:#757575;box-shadow:0 0 0 2px #757575}.trip-timeline-line[_ngcontent-%COMP%]{width:4px;flex:1;background:#e0e0e0;min-height:40px;border-radius:2px}.trip-timeline-content[_ngcontent-%COMP%]{flex:1;padding:16px 12px 12px 0;display:flex;flex-direction:column}.trip-timeline-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:500;margin-bottom:4px}.trip-icon[_ngcontent-%COMP%]{font-size:1.5em;color:#00bcd4}.trip-title[_ngcontent-%COMP%]{flex:1;font-weight:700;font-size:1.1em;color:#222}.trip-timeline-dates[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:#757575;font-size:.98em;margin-bottom:6px}.trip-date-icon[_ngcontent-%COMP%]{font-size:1.1em;color:#1976d2}.trip-timeline-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:4px}.placeholder-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:70vh;text-align:center}.placeholder-icon[_ngcontent-%COMP%]{font-size:64px;color:#00bcd4;margin-bottom:24px}h1[_ngcontent-%COMP%]{color:#00bcd4;font-size:2rem;margin-bottom:8px}p[_ngcontent-%COMP%]{color:#ff9800;font-size:1.1rem;font-style:italic}p.error-text[_ngcontent-%COMP%]{color:#f44336;font-size:1.1rem;font-style:italic}.placeholder-icon.error[_ngcontent-%COMP%]{color:#f44336}.plan-card[_ngcontent-%COMP%]{margin-bottom:18px;border-radius:12px;box-shadow:0 2px 8px #00000012}.plan-header-item[_ngcontent-%COMP%]{--background: transparent;--min-height: 0;padding:0 8px}.plan-icon[_ngcontent-%COMP%]{font-size:2em;color:#00bcd4;margin-right:12px}.plan-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;color:#222}.plan-dates[_ngcontent-%COMP%]{color:#757575;font-size:.98em}.plan-type[_ngcontent-%COMP%]{color:#1976d2;font-size:.95em}.plan-details-list[_ngcontent-%COMP%]{margin-top:8px}"]});let a=o;return a})();export{_i as TripsPage};
